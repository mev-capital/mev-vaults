{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback } from 'react';\nimport useSushi from './useSushi';\nimport { useWallet } from 'use-wallet';\nimport { stake, getMasterChefContract, stakeBUSD } from '../sushi/utils';\nimport { contractAddresses } from '../sushi/lib/constants';\nimport { isBSC, isPLG } from '../utils/zunami';\n\nconst useStake = function (coins) {\n  _s();\n\n  var _coins$filter$, _coins$filter$2, _coins$filter$3, _coins$filter$4;\n\n  let direct = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const {\n    account,\n    chainId\n  } = useWallet();\n  const sushi = useSushi();\n  let zunamiContract = getMasterChefContract(sushi);\n\n  if (isBSC(chainId)) {\n    zunamiContract = getMasterChefContract(sushi, chainId);\n  }\n\n  if (isPLG(chainId)) {\n    zunamiContract = getMasterChefContract(sushi, chainId);\n  }\n\n  const dai = (_coins$filter$ = coins.filter(coin => coin.name === 'DAI')[0]) === null || _coins$filter$ === void 0 ? void 0 : _coins$filter$.value;\n  const usdc = (_coins$filter$2 = coins.filter(coin => coin.name === 'USDC')[0]) === null || _coins$filter$2 === void 0 ? void 0 : _coins$filter$2.value;\n  const usdt = (_coins$filter$3 = coins.filter(coin => coin.name === 'USDT')[0]) === null || _coins$filter$3 === void 0 ? void 0 : _coins$filter$3.value;\n  const busd = (_coins$filter$4 = coins.filter(coin => coin.name === 'BUSD')[0]) === null || _coins$filter$4 === void 0 ? void 0 : _coins$filter$4.value;\n  const handleStake = useCallback(async () => {\n    if (chainId === 56 && busd && Number(usdt) === 0) {\n      const contract = sushi.contracts.busdContract;\n      contract.options.address = contractAddresses.busd[56];\n      contract.defaultAccount = account;\n      return await stakeBUSD(contract, account, busd);\n    }\n\n    if (isPLG(chainId)) {\n      const contract = sushi.contracts.polygonContract;\n      contract.options.address = contractAddresses.zunami[137];\n      contract.defaultAccount = account;\n    }\n\n    return await stake(zunamiContract, account, dai, usdc, usdt, direct, chainId);\n  }, [account, dai, usdc, usdt, busd, zunamiContract, direct, chainId]);\n  return {\n    onStake: handleStake\n  };\n};\n\n_s(useStake, \"FBAEZxlT5AueMzF8/HYadrE34l8=\", false, function () {\n  return [useWallet, useSushi];\n});\n\nexport default useStake;","map":{"version":3,"names":["useCallback","useSushi","useWallet","stake","getMasterChefContract","stakeBUSD","contractAddresses","isBSC","isPLG","useStake","coins","direct","account","chainId","sushi","zunamiContract","dai","filter","coin","name","value","usdc","usdt","busd","handleStake","Number","contract","contracts","busdContract","options","address","defaultAccount","polygonContract","zunami","onStake"],"sources":["/home/bacarif/Documents/MEV CAPITAL/ZunamiUI/src/hooks/useStake.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport useSushi from './useSushi';\nimport { useWallet } from 'use-wallet';\nimport { stake, getMasterChefContract, stakeBUSD } from '../sushi/utils';\nimport { contractAddresses } from '../sushi/lib/constants';\nimport { isBSC, isPLG } from '../utils/zunami';\n\ninterface Coin {\n    name: string;\n    value: string;\n}\n\ntype Coins = Array<Coin>;\n\nconst useStake = (coins: Coins, direct: boolean = false) => {\n    const { account, chainId } = useWallet();\n    const sushi = useSushi();\n    let zunamiContract = getMasterChefContract(sushi);\n\n    if (isBSC(chainId)) {\n        zunamiContract = getMasterChefContract(sushi, chainId);\n    }\n\n    if (isPLG(chainId)) {\n        zunamiContract = getMasterChefContract(sushi, chainId);\n    }\n\n    const dai = coins.filter((coin) => coin.name === 'DAI')[0]?.value;\n    const usdc = coins.filter((coin) => coin.name === 'USDC')[0]?.value;\n    const usdt = coins.filter((coin) => coin.name === 'USDT')[0]?.value;\n    const busd = coins.filter((coin) => coin.name === 'BUSD')[0]?.value;\n\n    const handleStake = useCallback(async () => {\n        if (chainId === 56 && busd && Number(usdt) === 0) {\n            const contract = sushi.contracts.busdContract;\n            contract.options.address = contractAddresses.busd[56];\n            contract.defaultAccount = account;\n            return await stakeBUSD(contract, account, busd);\n        }\n\n        if (isPLG(chainId)) {\n            const contract = sushi.contracts.polygonContract;\n            contract.options.address = contractAddresses.zunami[137];\n            contract.defaultAccount = account;\n        }\n\n        return await stake(zunamiContract, account, dai, usdc, usdt, direct, chainId);\n    }, [account, dai, usdc, usdt, busd, zunamiContract, direct, chainId]);\n\n    return { onStake: handleStake };\n};\n\nexport default useStake;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}