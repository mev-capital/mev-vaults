{"ast":null,"code":"var _jsxFileName = \"/home/bacarif/Documents/MEV CAPITAL/ZunamiUI/src/containers/Main.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Suspense, lazy } from 'react';\nimport { InfoBlock } from '../components/InfoBlock/InfoBlock';\nimport { BalanceInfoBlock } from '../components/BalanceInfoBlock/BalanceInfoBlock';\nimport { ClickableHeader } from '../components/ClickableHeader/ClickableHeader';\nimport './Main.scss';\nimport { getBalanceNumber } from '../utils/formatbalance';\nimport useLpPrice from '../hooks/useLpPrice';\nimport useBalanceOf from '../hooks/useBalanceOf';\nimport useCrossChainBalances from '../hooks/useCrossChainBalances';\nimport useFetch from 'react-fetch-hook';\nimport { zunamiInfoUrl, getHistoricalApyUrl, getTotalIncomeUrl, getActiveStratsUrl } from '../api/api';\nimport { BigNumber } from 'bignumber.js';\nimport usePendingOperations from '../hooks/usePendingOperations';\nimport { poolDataToChartData } from '../functions/pools';\nimport { Preloader } from '../components/Preloader/Preloader';\nimport { useWallet } from 'use-wallet';\nimport useEagerConnect from '../hooks/useEagerConnect';\nimport { BscMigrationModal } from '../components/BscMigrationModal/BscMigrationModal';\nimport { BscMigrationModal2 } from '../components/BscMigrationModal2/BscMigrationModal2';\nimport useOldBscBalance from '../hooks/useOldBscBalance';\nimport { UnsupportedChain } from '../components/UnsupportedChain/UnsupportedChain';\nimport useSupportedChain from '../hooks/useSupportedChain';\nimport { log } from '../utils/logger';\nimport usePausedContract from '../hooks/usePausedContract';\nimport { EthMergeWarningModal } from '../components/EthMergeWarningModal/EthMergeWarningModal';\nimport useUzdBalance from '../hooks/useUzdBalance';\nimport { isBSC, isETH, isPLG } from '../utils/zunami';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Header = /*#__PURE__*/lazy(_c = () => import('../components/Header/Header').then(module => ({\n  default: module.Header\n})));\n_c2 = Header;\nconst MobileSidebar = /*#__PURE__*/lazy(_c3 = () => import('../components/SideBar/MobileSidebar/MobileSidebar').then(module => ({\n  default: module.MobileSidebar\n})));\n_c4 = MobileSidebar;\nconst PendingBalance = /*#__PURE__*/lazy(_c5 = () => import('../components/PendingBalance/PendingBalance').then(module => ({\n  default: module.PendingBalance\n})));\n_c6 = PendingBalance;\nconst SideBar = /*#__PURE__*/lazy(_c7 = () => import('../components/SideBar/SideBar').then(module => ({\n  default: module.SideBar\n})));\n_c8 = SideBar;\nconst WalletStatus = /*#__PURE__*/lazy(_c9 = () => import('../components/WalletStatus/WalletStatus').then(module => ({\n  default: module.WalletStatus\n})));\n_c10 = WalletStatus;\nconst ApyChart = /*#__PURE__*/lazy(_c11 = () => import('../components/ApyChart/ApyChart').then(module => ({\n  default: module.ApyChart\n})));\n_c12 = ApyChart;\nconst Chart = /*#__PURE__*/lazy(_c13 = () => import('../components/Chart/Chart').then(module => ({\n  default: module.Chart\n})));\n_c14 = Chart;\nexport const Main = () => {\n  _s();\n\n  useEffect(() => {\n    log(`ðŸ Session started ${new Date().toString()}`);\n  }, []);\n  const {\n    account,\n    connect,\n    ethereum,\n    chainId\n  } = useWallet();\n  useEagerConnect(account ? account : '', connect, ethereum);\n  const isContractPaused = usePausedContract();\n  const lpPrice = useLpPrice();\n  const balance = useBalanceOf();\n  const oldBscBalance = useOldBscBalance();\n  const balances = useCrossChainBalances(lpPrice);\n  const uzdBalance = useUzdBalance();\n  let activeBalance = balances[0];\n\n  if (isBSC(chainId)) {\n    activeBalance = balances[1];\n  }\n\n  if (isPLG(chainId)) {\n    activeBalance = balances[2];\n  }\n\n  const userMaxWithdraw = lpPrice.toNumber() > 0 && balance.toNumber() !== -1 ? lpPrice.multipliedBy(activeBalance.value) : new BigNumber(-1);\n  const {\n    isLoading: isZunLoading,\n    data: zunData\n  } = useFetch(zunamiInfoUrl);\n  const zunamiInfo = zunData;\n  const {\n    data: activeStratsStat\n  } = useFetch(getActiveStratsUrl());\n  const poolStats = activeStratsStat;\n  const poolBestAprDaily = zunamiInfo ? zunamiInfo.apr / 100 / 365 : 0;\n  const poolBestAprMonthly = zunamiInfo ? zunamiInfo.apr / 100 / 365 * 30 : 0;\n  const poolBestApyYearly = zunamiInfo ? zunamiInfo.apy / 100 / 365 * 30 * 12 : 0;\n  const dailyProfit = userMaxWithdraw.toNumber() === -1 ? 0 : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestAprDaily;\n  const monthlyProfit = userMaxWithdraw.toNumber() === -1 ? 0 : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestAprMonthly;\n  const yearlyProfit = userMaxWithdraw.toNumber() === -1 ? 0 : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestApyYearly;\n  const [totalIncome, setTotalIncome] = useState('n/a');\n  useEffect(() => {\n    let activeBalance = balances[0].value;\n\n    if (isBSC(chainId)) {\n      activeBalance = balances[1].value;\n    }\n\n    if (isPLG(chainId)) {\n      activeBalance = balances[2].value;\n    }\n\n    if (!account || activeBalance.toNumber() === -1 || !chainId) {\n      return;\n    }\n\n    const getTotalIncome = async () => {\n      let response = null;\n      let totalIncomeBalance = activeBalance; // if user has minted UZD\n      // if (uzdBalance.toNumber()) {\n      //     totalIncomeBalance = totalIncomeBalance.plus(uzdBalance.dividedBy(lpPrice))\n      // }\n\n      try {\n        const totalIncomeUrl = getTotalIncomeUrl(account, totalIncomeBalance.toString(), chainId);\n        response = await fetch(totalIncomeUrl);\n        const data = await response.json();\n        setTotalIncome(`$${data.totalIncome}`);\n        log(`Total income. Requesting (${totalIncomeUrl})`);\n        log(`Total income. Value set to: ${data.totalIncome}`);\n      } catch (error) {\n        log(`â—ï¸ Error fetching total income: ${error.message}`);\n      }\n    };\n\n    getTotalIncome();\n  }, [account, balances, chainId, lpPrice, uzdBalance]);\n  const chartData = poolStats && poolStats.pools && zunamiInfo ? poolDataToChartData(poolStats.pools, zunamiInfo.tvl) : [];\n  const [histApyPeriod, setHistApyPeriod] = useState('week');\n  const [histApyData, setHistApyData] = useState([]);\n  useEffect(() => {\n    fetch(getHistoricalApyUrl(histApyPeriod)).then(response => {\n      return response.json();\n    }).then(items => {\n      setHistApyData(items.data);\n    });\n  }, [histApyPeriod]);\n  const pendingOperations = usePendingOperations();\n  const pendingWithdraw = lpPrice.toNumber() > 0 && pendingOperations.withdraw.toNumber() !== -1 ? lpPrice.multipliedBy(pendingOperations.withdraw) : new BigNumber(0);\n\n  const pdElement = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex\",\n    children: [/*#__PURE__*/_jsxDEV(PendingBalance, {\n      val: `PD: $${getBalanceNumber(pendingOperations.deposit, isETH(chainId) || isPLG(chainId) ? 6 : 18).toFixed(2)}`,\n      hint: `You have $${pendingOperations.deposit} in pending deposit`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PendingBalance, {\n      val: `PW: $${getBalanceNumber(pendingWithdraw).toFixed(2)}`,\n      hint: `You have $${pendingWithdraw} in pending withdraw`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 9\n  }, this); // v1.1 migration modal\n\n\n  const [showMigrationModal, setShowMigrationModal] = useState(false); // v1.2 migration modal\n\n  const [showMigrationModal2, setShowMigrationModal2] = useState(false); // ETH merge modal\n\n  const [showMergeModal, setShowMergeModal] = useState(false);\n  useEffect(() => {\n    setShowMergeModal(isContractPaused);\n  }, [isContractPaused]);\n  useEffect(() => {\n    if (oldBscBalance[0].toNumber() > 0) {\n      setShowMigrationModal(true);\n    } else {\n      setShowMigrationModal(false);\n    }\n\n    if (oldBscBalance[1].toNumber() > 0) {\n      log(`Migration from BSC gateway 1.1 to 1.2 needed. Old balance is ${oldBscBalance[1].toNumber()}`);\n      setShowMigrationModal2(true);\n    } else {\n      setShowMigrationModal2(false);\n    }\n  }, [oldBscBalance, chainId, account]);\n  const supportedChain = useSupportedChain();\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(Preloader, {\n      onlyIcon: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MobileSidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(EthMergeWarningModal, {\n          show: showMergeModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this), !supportedChain && /*#__PURE__*/_jsxDEV(UnsupportedChain, {\n          text: \"You're using unsupported chain. Please, switch either to Ethereum or Binance network.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(BscMigrationModal, {\n          show: showMigrationModal,\n          balance: oldBscBalance[0],\n          lpPrice: lpPrice,\n          onHide: () => {\n            setShowMigrationModal(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(BscMigrationModal2, {\n          show: showMigrationModal2,\n          balance: oldBscBalance[0].plus(oldBscBalance[1]),\n          lpPrice: lpPrice,\n          onHide: () => {\n            setShowMigrationModal2(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row main-row h-100\",\n          children: [/*#__PURE__*/_jsxDEV(SideBar, {\n            isMainPage: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col content-col dashboard-col\",\n            children: [/*#__PURE__*/_jsxDEV(WalletStatus, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ClickableHeader, {\n              name: \"Dashboard\",\n              icon: \"dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'first-row',\n              children: [/*#__PURE__*/_jsxDEV(BalanceInfoBlock, {\n                title: \"Balance\",\n                description: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [account && userMaxWithdraw.toNumber() === -1 && /*#__PURE__*/_jsxDEV(Preloader, {\n                    onlyIcon: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 49\n                  }, this), !account && 'n/a', account && userMaxWithdraw.toNumber() !== -1 && `$ ${getBalanceNumber(userMaxWithdraw).toNumber().toLocaleString('en')}`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 41\n                }, this),\n                withColor: true,\n                isStrategy: false,\n                colorfulBg: true,\n                balances: balances,\n                lpPrice: lpPrice\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InfoBlock, {\n                title: \"Pending Deposits / Withdraws\",\n                isLoading: isZunLoading,\n                withColor: true,\n                isStrategy: false,\n                colorfulBg: true,\n                secondaryRow: pdElement,\n                hint: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: `Funds passing through the ${chainId === 1 ? 'Transaction Streamlining Mechanism and' : 'cross chain'} will be credited within 24 hours`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InfoBlock, {\n                title: \"Total Income\",\n                description: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [account && totalIncome === 'n/a' && /*#__PURE__*/_jsxDEV(Preloader, {\n                    onlyIcon: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 49\n                  }, this), !account && 'n/a', account && totalIncome !== 'n/a' && totalIncome]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 41\n                }, this),\n                isLoading: isZunLoading,\n                withColor: true,\n                isStrategy: false,\n                colorfulBg: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"second-row\",\n              children: [/*#__PURE__*/_jsxDEV(InfoBlock, {\n                title: \"Profit\",\n                description: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-primary\",\n                    children: `${dailyProfit ? dailyProfit.toFixed(2) : 0} USD`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" Daily\\xA0\\xA0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 41\n                }, this),\n                withColor: false,\n                isStrategy: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InfoBlock, {\n                title: \"\\xA0\",\n                description: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-primary\",\n                    children: `${monthlyProfit ? monthlyProfit.toFixed(2) : 0} USD`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" Monthly\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 41\n                }, this),\n                withColor: false,\n                isStrategy: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InfoBlock, {\n                title: \"\\xA0\",\n                description: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-primary\",\n                    children: `${yearlyProfit ? yearlyProfit.toFixed(2) : 0} USD`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" Yearly\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 41\n                }, this),\n                withColor: false,\n                isStrategy: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"third-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"strats-chart-col\",\n                children: /*#__PURE__*/_jsxDEV(Chart, {\n                  data: chartData\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"hist-apy-col\",\n                children: /*#__PURE__*/_jsxDEV(ApyChart, {\n                  data: histApyData,\n                  onRangeChange: range => {\n                    setHistApyPeriod(range);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Main, \"y2DCTSVJws7DNHdo89ixil0lfUk=\", false, function () {\n  return [useWallet, useEagerConnect, usePausedContract, useLpPrice, useBalanceOf, useOldBscBalance, useCrossChainBalances, useUzdBalance, useFetch, useFetch, usePendingOperations, useSupportedChain];\n});\n\n_c15 = Main;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15;\n\n$RefreshReg$(_c, \"Header$lazy\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"MobileSidebar$lazy\");\n$RefreshReg$(_c4, \"MobileSidebar\");\n$RefreshReg$(_c5, \"PendingBalance$lazy\");\n$RefreshReg$(_c6, \"PendingBalance\");\n$RefreshReg$(_c7, \"SideBar$lazy\");\n$RefreshReg$(_c8, \"SideBar\");\n$RefreshReg$(_c9, \"WalletStatus$lazy\");\n$RefreshReg$(_c10, \"WalletStatus\");\n$RefreshReg$(_c11, \"ApyChart$lazy\");\n$RefreshReg$(_c12, \"ApyChart\");\n$RefreshReg$(_c13, \"Chart$lazy\");\n$RefreshReg$(_c14, \"Chart\");\n$RefreshReg$(_c15, \"Main\");","map":{"version":3,"names":["React","useEffect","useState","Suspense","lazy","InfoBlock","BalanceInfoBlock","ClickableHeader","getBalanceNumber","useLpPrice","useBalanceOf","useCrossChainBalances","useFetch","zunamiInfoUrl","getHistoricalApyUrl","getTotalIncomeUrl","getActiveStratsUrl","BigNumber","usePendingOperations","poolDataToChartData","Preloader","useWallet","useEagerConnect","BscMigrationModal","BscMigrationModal2","useOldBscBalance","UnsupportedChain","useSupportedChain","log","usePausedContract","EthMergeWarningModal","useUzdBalance","isBSC","isETH","isPLG","Header","then","module","default","MobileSidebar","PendingBalance","SideBar","WalletStatus","ApyChart","Chart","Main","Date","toString","account","connect","ethereum","chainId","isContractPaused","lpPrice","balance","oldBscBalance","balances","uzdBalance","activeBalance","userMaxWithdraw","toNumber","multipliedBy","value","isLoading","isZunLoading","data","zunData","zunamiInfo","activeStratsStat","poolStats","poolBestAprDaily","apr","poolBestAprMonthly","poolBestApyYearly","apy","dailyProfit","monthlyProfit","yearlyProfit","totalIncome","setTotalIncome","getTotalIncome","response","totalIncomeBalance","totalIncomeUrl","fetch","json","error","message","chartData","pools","tvl","histApyPeriod","setHistApyPeriod","histApyData","setHistApyData","items","pendingOperations","pendingWithdraw","withdraw","pdElement","deposit","toFixed","showMigrationModal","setShowMigrationModal","showMigrationModal2","setShowMigrationModal2","showMergeModal","setShowMergeModal","supportedChain","plus","toLocaleString","range"],"sources":["/home/bacarif/Documents/MEV CAPITAL/ZunamiUI/src/containers/Main.tsx"],"sourcesContent":["import React, { useEffect, useState, Suspense, lazy } from 'react';\nimport { InfoBlock } from '../components/InfoBlock/InfoBlock';\nimport { BalanceInfoBlock } from '../components/BalanceInfoBlock/BalanceInfoBlock';\nimport { ClickableHeader } from '../components/ClickableHeader/ClickableHeader';\nimport './Main.scss';\nimport { getBalanceNumber } from '../utils/formatbalance';\nimport useLpPrice from '../hooks/useLpPrice';\nimport useBalanceOf from '../hooks/useBalanceOf';\nimport useCrossChainBalances from '../hooks/useCrossChainBalances';\nimport useFetch from 'react-fetch-hook';\nimport {\n    zunamiInfoUrl,\n    getHistoricalApyUrl,\n    getTotalIncomeUrl,\n    getActiveStratsUrl,\n} from '../api/api';\nimport { BigNumber } from 'bignumber.js';\nimport usePendingOperations from '../hooks/usePendingOperations';\nimport { PoolInfo, poolDataToChartData } from '../functions/pools';\nimport { Preloader } from '../components/Preloader/Preloader';\nimport { useWallet } from 'use-wallet';\nimport useEagerConnect from '../hooks/useEagerConnect';\nimport { BscMigrationModal } from '../components/BscMigrationModal/BscMigrationModal';\nimport { BscMigrationModal2 } from '../components/BscMigrationModal2/BscMigrationModal2';\nimport useOldBscBalance from '../hooks/useOldBscBalance';\nimport { UnsupportedChain } from '../components/UnsupportedChain/UnsupportedChain';\nimport useSupportedChain from '../hooks/useSupportedChain';\nimport { log } from '../utils/logger';\nimport usePausedContract from '../hooks/usePausedContract';\nimport { EthMergeWarningModal } from '../components/EthMergeWarningModal/EthMergeWarningModal';\nimport useUzdBalance from '../hooks/useUzdBalance';\nimport { isBSC, isETH, isPLG } from '../utils/zunami';\n\nconst Header = lazy(() =>\n    import('../components/Header/Header').then((module) => ({ default: module.Header }))\n);\n\nconst MobileSidebar = lazy(() =>\n    import('../components/SideBar/MobileSidebar/MobileSidebar').then((module) => ({\n        default: module.MobileSidebar,\n    }))\n);\n\nconst PendingBalance = lazy(() =>\n    import('../components/PendingBalance/PendingBalance').then((module) => ({\n        default: module.PendingBalance,\n    }))\n);\n\nconst SideBar = lazy(() =>\n    import('../components/SideBar/SideBar').then((module) => ({ default: module.SideBar }))\n);\n\nconst WalletStatus = lazy(() =>\n    import('../components/WalletStatus/WalletStatus').then((module) => ({\n        default: module.WalletStatus,\n    }))\n);\n\nconst ApyChart = lazy(() =>\n    import('../components/ApyChart/ApyChart').then((module) => ({ default: module.ApyChart }))\n);\n\nconst Chart = lazy(() =>\n    import('../components/Chart/Chart').then((module) => ({ default: module.Chart }))\n);\n\ninterface ZunamiInfo {\n    tvl: BigNumber;\n    apy: number;\n    apr: number;\n}\n\ninterface ZunamiInfoFetch {\n    data: any;\n    isLoading: boolean;\n    error: any;\n}\n\ninterface PoolsStats {\n    pools: Array<PoolInfo>;\n}\n\nexport const Main = (): JSX.Element => {\n    useEffect(() => {\n        log(`ðŸ Session started ${new Date().toString()}`);\n    }, []);\n\n    const { account, connect, ethereum, chainId } = useWallet();\n    useEagerConnect(account ? account : '', connect, ethereum);\n    const isContractPaused = usePausedContract();\n    const lpPrice = useLpPrice();\n    const balance = useBalanceOf();\n    const oldBscBalance = useOldBscBalance();\n    const balances = useCrossChainBalances(lpPrice);\n    const uzdBalance = useUzdBalance();\n    let activeBalance = balances[0];\n\n    if (isBSC(chainId)) {\n        activeBalance = balances[1];\n    }\n\n    if (isPLG(chainId)) {\n        activeBalance = balances[2];\n    }\n\n    const userMaxWithdraw =\n        lpPrice.toNumber() > 0 && balance.toNumber() !== -1\n            ? lpPrice.multipliedBy(activeBalance.value)\n            : new BigNumber(-1);\n\n    const { isLoading: isZunLoading, data: zunData } = useFetch(zunamiInfoUrl) as ZunamiInfoFetch;\n\n    const zunamiInfo = zunData as ZunamiInfo;\n\n    const { data: activeStratsStat } = useFetch(getActiveStratsUrl());\n    const poolStats = activeStratsStat as PoolsStats;\n\n    const poolBestAprDaily = zunamiInfo ? zunamiInfo.apr / 100 / 365 : 0;\n    const poolBestAprMonthly = zunamiInfo ? (zunamiInfo.apr / 100 / 365) * 30 : 0;\n    const poolBestApyYearly = zunamiInfo ? (zunamiInfo.apy / 100 / 365) * 30 * 12 : 0;\n    const dailyProfit =\n        userMaxWithdraw.toNumber() === -1\n            ? 0\n            : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestAprDaily;\n    const monthlyProfit =\n        userMaxWithdraw.toNumber() === -1\n            ? 0\n            : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestAprMonthly;\n    const yearlyProfit =\n        userMaxWithdraw.toNumber() === -1\n            ? 0\n            : getBalanceNumber(userMaxWithdraw).toNumber() * poolBestApyYearly;\n\n    const [totalIncome, setTotalIncome] = useState('n/a');\n\n    useEffect(() => {\n        let activeBalance = balances[0].value;\n\n        if (isBSC(chainId)) {\n            activeBalance = balances[1].value;\n        }\n\n        if (isPLG(chainId)) {\n            activeBalance = balances[2].value;\n        }\n\n        if (!account || activeBalance.toNumber() === -1 || !chainId) {\n            return;\n        }\n\n        const getTotalIncome = async () => {\n            let response = null;\n\n            let totalIncomeBalance = activeBalance;\n\n            // if user has minted UZD\n            // if (uzdBalance.toNumber()) {\n            //     totalIncomeBalance = totalIncomeBalance.plus(uzdBalance.dividedBy(lpPrice))\n            // }\n\n            try {\n                const totalIncomeUrl =\n                    getTotalIncomeUrl(account, totalIncomeBalance.toString(), chainId);\n\n                response = await fetch(totalIncomeUrl);\n\n                const data = await response.json();\n                setTotalIncome(`$${data.totalIncome}`);\n\n                log(`Total income. Requesting (${totalIncomeUrl})`)\n                log(`Total income. Value set to: ${data.totalIncome}`);\n            } catch (error: any) {\n                log(`â—ï¸ Error fetching total income: ${error.message}`);\n            }\n        };\n\n        getTotalIncome();\n    }, [account, balances, chainId, lpPrice, uzdBalance]);\n\n    const chartData =\n        poolStats && poolStats.pools && zunamiInfo\n            ? poolDataToChartData(poolStats.pools, zunamiInfo.tvl)\n            : [];\n\n    const [histApyPeriod, setHistApyPeriod] = useState('week');\n    const [histApyData, setHistApyData] = useState([]);\n\n    useEffect(() => {\n        fetch(getHistoricalApyUrl(histApyPeriod))\n            .then((response) => {\n                return response.json();\n            })\n            .then((items) => {\n                setHistApyData(items.data);\n            });\n    }, [histApyPeriod]);\n\n    const pendingOperations = usePendingOperations();\n\n    const pendingWithdraw =\n        lpPrice.toNumber() > 0 && pendingOperations.withdraw.toNumber() !== -1\n            ? lpPrice.multipliedBy(pendingOperations.withdraw)\n            : new BigNumber(0);\n\n    const pdElement = (\n        <div className=\"d-flex\">\n            <PendingBalance\n                val={`PD: $${getBalanceNumber(\n                    pendingOperations.deposit,\n                    isETH(chainId) || isPLG(chainId) ? 6 : 18\n                ).toFixed(2)}`}\n                hint={`You have $${pendingOperations.deposit} in pending deposit`}\n            />\n            <PendingBalance\n                val={`PW: $${getBalanceNumber(pendingWithdraw).toFixed(2)}`}\n                hint={`You have $${pendingWithdraw} in pending withdraw`}\n            />\n        </div>\n    );\n\n    // v1.1 migration modal\n    const [showMigrationModal, setShowMigrationModal] = useState(false);\n    // v1.2 migration modal\n    const [showMigrationModal2, setShowMigrationModal2] = useState(false);\n    // ETH merge modal\n    const [showMergeModal, setShowMergeModal] = useState(false);\n\n    useEffect(() => {\n        setShowMergeModal(isContractPaused);\n    }, [isContractPaused]);\n\n    useEffect(() => {\n        if (oldBscBalance[0].toNumber() > 0) {\n            setShowMigrationModal(true);\n        } else {\n            setShowMigrationModal(false);\n        }\n\n        if (oldBscBalance[1].toNumber() > 0) {\n            log(\n                `Migration from BSC gateway 1.1 to 1.2 needed. Old balance is ${oldBscBalance[1].toNumber()}`\n            );\n            setShowMigrationModal2(true);\n        } else {\n            setShowMigrationModal2(false);\n        }\n    }, [oldBscBalance, chainId, account]);\n\n    const supportedChain = useSupportedChain();\n\n    return (\n        <Suspense fallback={<Preloader onlyIcon={true} />}>\n            <React.Fragment>\n                <Header />\n                <MobileSidebar />\n                <div className=\"container\">\n                    <EthMergeWarningModal show={showMergeModal} />\n                    {!supportedChain && (\n                        <UnsupportedChain text=\"You're using unsupported chain. Please, switch either to Ethereum or Binance network.\" />\n                    )}\n                    <BscMigrationModal\n                        show={showMigrationModal}\n                        balance={oldBscBalance[0]}\n                        lpPrice={lpPrice}\n                        onHide={() => {\n                            setShowMigrationModal(false);\n                        }}\n                    />\n                    <BscMigrationModal2\n                        show={showMigrationModal2}\n                        balance={oldBscBalance[0].plus(oldBscBalance[1])}\n                        lpPrice={lpPrice}\n                        onHide={() => {\n                            setShowMigrationModal2(false);\n                        }}\n                    />\n                    <div className=\"row main-row h-100\">\n                        <SideBar isMainPage={true} />\n                        <div className=\"col content-col dashboard-col\">\n                            <WalletStatus />\n                            <ClickableHeader name=\"Dashboard\" icon=\"dashboard\" />\n                            <div className={'first-row'}>\n                                <BalanceInfoBlock\n                                    title=\"Balance\"\n                                    description={\n                                        <div>\n                                            {account && userMaxWithdraw.toNumber() === -1 && (\n                                                <Preloader onlyIcon={true} />\n                                            )}\n                                            {!account && 'n/a'}\n                                            {account &&\n                                                userMaxWithdraw.toNumber() !== -1 &&\n                                                `$ ${getBalanceNumber(userMaxWithdraw)\n                                                    .toNumber()\n                                                    .toLocaleString('en')}`}\n                                        </div>\n                                    }\n                                    withColor={true}\n                                    isStrategy={false}\n                                    colorfulBg={true}\n                                    balances={balances}\n                                    lpPrice={lpPrice}\n                                />\n                                <InfoBlock\n                                    title=\"Pending Deposits / Withdraws\"\n                                    isLoading={isZunLoading}\n                                    withColor={true}\n                                    isStrategy={false}\n                                    colorfulBg={true}\n                                    secondaryRow={pdElement}\n                                    hint={\n                                        <span>\n                                            {`Funds passing through the ${\n                                                chainId === 1\n                                                    ? 'Transaction Streamlining Mechanism and'\n                                                    : 'cross chain'\n                                            } will be credited within 24 hours`}\n                                        </span>\n                                    }\n                                />\n                                <InfoBlock\n                                    title=\"Total Income\"\n                                    description={\n                                        <div>\n                                            {account && totalIncome === 'n/a' && (\n                                                <Preloader onlyIcon={true} />\n                                            )}\n                                            {!account && 'n/a'}\n                                            {account && totalIncome !== 'n/a' && totalIncome}\n                                        </div>\n                                    }\n                                    isLoading={isZunLoading}\n                                    withColor={true}\n                                    isStrategy={false}\n                                    colorfulBg={true}\n                                />\n                            </div>\n                            <div className=\"second-row\">\n                                <InfoBlock\n                                    title=\"Profit\"\n                                    description={\n                                        <div>\n                                            <span className=\"text-primary\">{`${\n                                                dailyProfit ? dailyProfit.toFixed(2) : 0\n                                            } USD`}</span>\n                                            <span> Daily&nbsp;&nbsp;</span>\n                                        </div>\n                                    }\n                                    withColor={false}\n                                    isStrategy={false}\n                                />\n                                <InfoBlock\n                                    title=\"&nbsp;\"\n                                    description={\n                                        <div>\n                                            <span className=\"text-primary\">{`${\n                                                monthlyProfit ? monthlyProfit.toFixed(2) : 0\n                                            } USD`}</span>\n                                            <span> Monthly</span>\n                                        </div>\n                                    }\n                                    withColor={false}\n                                    isStrategy={false}\n                                />\n                                <InfoBlock\n                                    title=\"&nbsp;\"\n                                    description={\n                                        <div>\n                                            <span className=\"text-primary\">{`${\n                                                yearlyProfit ? yearlyProfit.toFixed(2) : 0\n                                            } USD`}</span>\n                                            <span> Yearly</span>\n                                        </div>\n                                    }\n                                    withColor={false}\n                                    isStrategy={false}\n                                />\n                            </div>\n                            <div className=\"third-row\">\n                                <div className=\"strats-chart-col\">\n                                    <Chart data={chartData} />\n                                </div>\n                                <div className=\"hist-apy-col\">\n                                    <ApyChart\n                                        data={histApyData}\n                                        onRangeChange={(range: string) => {\n                                            setHistApyPeriod(range);\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        </Suspense>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}