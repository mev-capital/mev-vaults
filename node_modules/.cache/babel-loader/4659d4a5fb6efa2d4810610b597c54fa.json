{"ast":null,"code":"var _jsxFileName = \"/home/bacarif/Documents/MEV CAPITAL/ZunamiUI/src/components/UzdMigrationModal/UzdMigrationModal.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useCallback } from 'react';\nimport { Modal } from 'react-bootstrap';\nimport './UzdMigrationModal.scss';\nimport { InfoBlock } from '../InfoBlock/InfoBlock';\nimport { getBalanceNumber } from '../../utils/formatbalance';\nimport { useWallet } from 'use-wallet';\nimport useSushi from './../../hooks/useSushi';\nimport { isBSC, isETH } from '../../utils/zunami';\nimport { contractAddresses } from '../../sushi/lib/constants';\nimport { log } from '../../utils/logger';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UzdMigrationModal = props => {\n  _s();\n\n  const [result, setResult] = useState('');\n  const [pending, setPending] = useState(false);\n  const {\n    account,\n    chainId\n  } = useWallet();\n  const sushi = useSushi();\n  const eth = window.ethereum;\n  const withdrawAll = useCallback(async () => {\n    if (!account || !chainId) {\n      return;\n    }\n\n    try {\n      if (!isETH(chainId)) {\n        alert('Switch to ETH network to continue');\n        return;\n      }\n\n      setPending(true); // OLD DEPRECATED UZD contract. DO NOT USE\n\n      const zunamiContract = sushi.contracts.uzdContract;\n      zunamiContract.options.address = contractAddresses.deprecated.v_1_0_uzd;\n      zunamiContract.options.from = account;\n      zunamiContract.defaultAccount = account;\n      log(`Calling withdrawAll('${account}', '${contractAddresses.deprecated.v_1_0_uzd}') on old USD contract`);\n      await zunamiContract.methods.withdrawAll(account, account).send({\n        from: account\n      }).on('transactionHash', transactionHash => {\n        return transactionHash;\n      });\n      setResult(`UZD coins were successfully withdrwawn. Page will be reloaded in 7 seconds...`);\n      setTimeout(() => {\n        window.location.reload();\n      }, 7000);\n    } catch (error) {\n      setResult(`Error while deprecated UZD withdrawAll: ${error.message}`);\n    }\n\n    setPending(false);\n  }, [account, chainId, sushi]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: props.show,\n    backdrop: \"static\",\n    animation: false,\n    keyboard: false,\n    centered: true,\n    onHide: () => {\n      if (props.onHide) {\n        props.onHide();\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      className: \"d-flex gap-3 flex-column justify-content-center align-items-center BscMigrationModal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-center\",\n        children: \"It's time to migrate to Zunami UZD v1.1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center\",\n        children: \"We apologize, but in order to continue using the protocol, you will need to withdraw funds from the outdated version and deposit them again. Don't worry! Your funds and income are saved.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InfoBlock, {\n        title: \"Balance\",\n        description: `$ ${getBalanceNumber(props.balance).toNumber().toLocaleString('en')}`,\n        withColor: true,\n        isStrategy: false,\n        colorfulBg: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `zun-button ${pending ? 'disabled' : ''} ${isBSC(chainId) ? 'hide' : ''}`,\n        onClick: withdrawAll,\n        children: \"Withdraw all\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), !isETH(chainId) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning text-center\",\n        children: [\"Please, switch to Ethereum network.\", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"zun-button mt-2\",\n          onClick: async () => {\n            await eth.request({\n              method: 'wallet_switchEthereumChain',\n              params: [{\n                chainId: '0x1'\n              }]\n            });\n            window.location.reload();\n          },\n          children: \"Switch to Ethereum\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info\",\n        children: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UzdMigrationModal, \"Zk6ziFVMDAYuvEyQTLY1woWIEYw=\", false, function () {\n  return [useWallet, useSushi];\n});\n\n_c = UzdMigrationModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"UzdMigrationModal\");","map":{"version":3,"names":["useState","useCallback","Modal","InfoBlock","getBalanceNumber","useWallet","useSushi","isBSC","isETH","contractAddresses","log","UzdMigrationModal","props","result","setResult","pending","setPending","account","chainId","sushi","eth","window","ethereum","withdrawAll","alert","zunamiContract","contracts","uzdContract","options","address","deprecated","v_1_0_uzd","from","defaultAccount","methods","send","on","transactionHash","setTimeout","location","reload","error","message","show","onHide","balance","toNumber","toLocaleString","request","method","params"],"sources":["/home/bacarif/Documents/MEV CAPITAL/ZunamiUI/src/components/UzdMigrationModal/UzdMigrationModal.tsx"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { Modal } from 'react-bootstrap';\nimport './UzdMigrationModal.scss';\nimport { InfoBlock } from '../InfoBlock/InfoBlock';\nimport { BigNumber } from 'bignumber.js';\nimport { getBalanceNumber } from '../../utils/formatbalance';\nimport { useWallet } from 'use-wallet';\nimport useSushi from './../../hooks/useSushi';\nimport { isBSC, isETH } from '../../utils/zunami';\nimport { contractAddresses } from '../../sushi/lib/constants';\nimport { log } from '../../utils/logger';\n\ninterface UzdMigrationModalProps {\n    balance: BigNumber;\n    show: boolean;\n    onWalletConnected?: Function;\n    onHide?: Function;\n}\n\nexport const UzdMigrationModal = (props: UzdMigrationModalProps): JSX.Element => {\n    const [result, setResult] = useState('');\n    const [pending, setPending] = useState(false);\n    const { account, chainId } = useWallet();\n    const sushi = useSushi();\n    const eth = window.ethereum;\n\n    const withdrawAll = useCallback(async () => {\n        if (!account || !chainId) {\n            return;\n        }\n\n        try {\n            if (!isETH(chainId)) {\n                alert('Switch to ETH network to continue');\n                return;\n            }\n\n            setPending(true);\n            // OLD DEPRECATED UZD contract. DO NOT USE\n            const zunamiContract = sushi.contracts.uzdContract;\n            zunamiContract.options.address = contractAddresses.deprecated.v_1_0_uzd;\n            zunamiContract.options.from = account;\n            zunamiContract.defaultAccount = account;\n\n            log(\n                `Calling withdrawAll('${account}', '${contractAddresses.deprecated.v_1_0_uzd}') on old USD contract`\n            );\n\n            await zunamiContract.methods\n                .withdrawAll(account, account)\n                .send({ from: account })\n                .on('transactionHash', (transactionHash: string) => {\n                    return transactionHash;\n                });\n\n            setResult(\n                `UZD coins were successfully withdrwawn. Page will be reloaded in 7 seconds...`\n            );\n\n            setTimeout(() => {\n                window.location.reload();\n            }, 7000);\n        } catch (error: any) {\n            setResult(`Error while deprecated UZD withdrawAll: ${error.message}`);\n        }\n\n        setPending(false);\n    }, [account, chainId, sushi]);\n\n    return (\n        <Modal\n            show={props.show}\n            backdrop=\"static\"\n            animation={false}\n            keyboard={false}\n            centered\n            onHide={() => {\n                if (props.onHide) {\n                    props.onHide();\n                }\n            }}\n        >\n            <Modal.Header closeButton>\n                <Modal.Title></Modal.Title>\n            </Modal.Header>\n            <Modal.Body className=\"d-flex gap-3 flex-column justify-content-center align-items-center BscMigrationModal\">\n                <h3 className=\"text-center\">It's time to migrate to Zunami UZD v1.1</h3>\n                <p className=\"text-center\">\n                    We apologize, but in order to continue using the protocol, you will need to\n                    withdraw funds from the outdated version and deposit them again. Don't worry!\n                    Your funds and income are saved.\n                </p>\n                <InfoBlock\n                    title=\"Balance\"\n                    description={`$ ${getBalanceNumber(props.balance)\n                        .toNumber()\n                        .toLocaleString('en')}`}\n                    withColor={true}\n                    isStrategy={false}\n                    colorfulBg={true}\n                />\n                <button\n                    className={`zun-button ${pending ? 'disabled' : ''} ${\n                        isBSC(chainId) ? 'hide' : ''\n                    }`}\n                    onClick={withdrawAll}\n                >\n                    Withdraw all\n                </button>\n                {!isETH(chainId) && (\n                    <div className=\"alert alert-warning text-center\">\n                        Please, switch to Ethereum network.\n                        <button\n                            className=\"zun-button mt-2\"\n                            onClick={async () => {\n                                await eth.request({\n                                    method: 'wallet_switchEthereumChain',\n                                    params: [{ chainId: '0x1' }],\n                                });\n                                window.location.reload();\n                            }}\n                        >\n                            Switch to Ethereum\n                        </button>\n                    </div>\n                )}\n                {result && <div className=\"alert alert-info\">{result}</div>}\n            </Modal.Body>\n        </Modal>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}